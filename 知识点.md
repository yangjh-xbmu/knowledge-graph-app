### TypeScript 必备知识大纲 (面向JS开发者)

#### **第一部分：核心基础 (The Core Essentials)**

这部分是重中之重，掌握了它们，你就能处理 80% 的日常工作。

1. **为什么是 TypeScript？**
    * **类型安全 (Type Safety)**：在编译阶段发现错误，而不是在运行时。
    * **更好的工具支持 (Better Tooling)**：无与伦比的代码自动补全、重构和导航。
    * **代码可读性与可维护性 (Readability & Maintainability)**：类型本身就是一种文档。

2. **基础类型 (Basic Types)**
    * **JS 已有类型**: `string`, `number`, `boolean`, `null`, `undefined`, `symbol`, `bigint`。
    * **TS 新增类型**:
        * `any`: 放弃类型检查，回到 JavaScript。（**慎用！**）
        * `unknown`: `any` 的安全版本，使用前必须进行类型检查或断言。
        * `void`: 通常用于表示函数没有返回值。
        * `never`: 表示永远不会返回值的函数类型（如抛出异常或无限循环）。
        * `Array`: `string[]` 或 `Array<string>` 两种写法。
        * `Tuple` (元组): `[string, number]`，一个已知长度和类型的数组。

3. **类型声明与推断 (Type Declaration & Inference)**
    * **显式声明**: `let name: string = 'Alice';`
    * **类型推断**: `let age = 30;` // TS 会自动推断 age 为 `number` 类型。
    * **最佳实践**: 在变量初始化时，优先使用类型推断；在函数参数、返回值和复杂的对象结构上，使用显式声明。

4. **函数 (Functions)**
    * **参数类型**: `function greet(name: string) { ... }`
    * **返回值类型**: `function getAge(): number { return 30; }`
    * **可选参数与默认参数**: `function buildName(firstName: string, lastName?: string) { ... }` 和 `function buildName(firstName: string, lastName = 'Smith') { ... }`
    * **函数重载 (Overload)**: 为同一个函数提供多个函数类型定义。

5. **对象类型：接口 (Interfaces) 与 类型别名 (Type Aliases)**
    * **接口 `interface`**: 定义对象的“形状”（shape）。

        ```typescript
        interface User {
          id: number;
          name: string;
          isActive: boolean;
          // 可选属性
          email?: string;
          // 只读属性
          readonly registrationDate: Date;
        }
        ```

    * **类型别名 `type`**: 为任何类型创建一个新名字。

        ```typescript
        type Point = {
          x: number;
          y: number;
        };
        ```

    * **`interface` vs `type`**:
        * **共同点**: 都能描述对象或函数的形状。
        * **不同点**:
            * `interface` 可以被 `extends` 和 `implements`，并且支持声明合并（declaration merging）。
            * `type` 更灵活，可以用于联合类型、元组等任何类型。
        * **团队约定**: 优先使用 `interface` 定义对象，用 `type` 定义联合类型、交叉类型等。

#### **第二部分：进阶核心 (The Power Features)**

这部分是 TypeScript 强大能力的核心体现，是写出高质量、可复用代码的关键。

6. **联合类型 (Union Types) 与 交叉类型 (Intersection Types)**
    * **联合类型 `|`**: 表示一个值可以是几种类型之一。

        ```typescript
        let id: string | number;
        id = 101;
        id = 'abc';
        ```

    * **交叉类型 `&`**: 将多个类型合并为一个。

        ```typescript
        interface Colorful { color: string; }
        interface Circle { radius: number; }
        type ColorfulCircle = Colorful & Circle; // 拥有 color 和 radius 属性
        ```

    * **类型守卫 (Type Guards)**: 在联合类型中，通过 `typeof`, `instanceof`, `in` 等方式收窄类型范围。

7. **泛型 (Generics)**
    * **核心思想**: 创建可重用的组件，使其能够处理多种数据类型而不是单一类型。就像给函数传递参数一样，泛型是给**类型**传递参数。
    * **泛型函数**:

        ```typescript
        function identity<T>(arg: T): T {
          return arg;
        }
        let output = identity<string>("myString");
        ```

    * **泛型接口**:

        ```typescript
        interface ApiResponse<T> {
          data: T;
          code: number;
          message: string;
        }
        ```

    * **泛型约束**: 使用 `extends` 关键字限制泛型类型。

        ```typescript
        interface Lengthwise {
          length: number;
        }
        function loggingIdentity<T extends Lengthwise>(arg: T): T { ... }
        ```

8. **枚举 (Enums)**
    * 用于定义一组命名的常量集合，可以是数字或字符串。

        ```typescript
        enum Direction {
          Up,
          Down,
          Left,
          Right,
        }
        ```

9. **类 (Classes)**
    * **JS 基础上新增**:
        * **访问修饰符**: `public` (默认), `private`, `protected`。
        * **只读属性**: `readonly`。
        * **抽象类 (Abstract Classes)**: 不能被实例化，只能被继承。
        * **接口实现**: `class MyClass implements MyInterface { ... }`

#### **第三部分：高级与实践 (Advanced & Practical)**

这部分内容可以让你写出更精炼、更强大的类型代码，并在实际项目中游刃有余。

10. **高级类型 (Advanced Types)**
    * **工具类型 (Utility Types)**: TS 内置的一些常用类型转换工具，**必须掌握**！
        * `Partial<T>`: 将 T 的所有属性变为可选。
        * `Readonly<T>`: 将 T 的所有属性变为只读。
        * `Pick<T, K>`: 从 T 中挑选出 K 属性。
        * `Omit<T, K>`: 从 T 中排除掉 K 属性。
        * `Record<K, T>`: 创建一个 key 为 K 类型，value 为 T 类型的对象。
    * **`keyof` 操作符**: 获取一个类型的所有公有属性名组成的联合类型。
    * **`typeof` 操作符**: 获取一个变量或属性的类型。
    * **映射类型 (Mapped Types)**: 基于一个旧类型创建新类型，常与 `keyof` 结合使用。
    * **条件类型 (Conditional Types)**: `T extends U ? X : Y`，类型中的三元运算符。

11. **模块与声明文件 (Modules & Declaration Files)**
    * **模块**: TS 使用 ES6 模块系统 (`import`/`export`)。
    * **声明文件 (`.d.ts`)**: 这是 TS 与 JS 生态系统协作的桥梁。
        * 当你使用一个没有 TS 类型的第三方 JS 库时，需要一个声明文件来告诉 TS 这个库的类型信息。
        * 学会如何查找和安装社区维护的声明文件（如 `@types/lodash`）。

12. **配置文件 `tsconfig.json`**
    * 这是 TS 项目的“大脑”，告诉编译器如何工作。
    * **必知核心配置**:
        * `target`: 编译后输出的 JS 版本（如 `ES5`, `ES2020`）。
        * `module`: 编译后使用的模块系统（如 `CommonJS`, `ESNext`）。
        * `strict`: **强烈建议开启**，它包含了一系列严格的类型检查规则。
        * `outDir`: 编译后 JS 文件的输出目录。
        * `rootDir`: TS 源文件的根目录。
        * `include` / `exclude`: 指定哪些文件需要被编译。

---

### 学习路径建议

1. **第一步 (1-5)**: 先把**第一部分**完全搞懂。搭建好环境，练习基础类型、函数和接口的用法。这是基础，能让你立刻开始写简单的 TS 代码。
2. **第二步 (6-9)**: 深入**第二部分**。重点理解**泛型**，它是 TS 的精髓。学习联合类型和类，你会发现代码的灵活性和健壮性大大提升。
3. **第三步 (10-12)**: 掌握**第三部分**。开始学习使用**工具类型**，它们会极大地提高你的开发效率。了解 `tsconfig.json` 的核心配置，并学会如何为你的 JS 库引入类型声明。
